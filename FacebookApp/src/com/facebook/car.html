<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CarSell 3D — Single File</title>
  <style>
    :root {
      --bg: #0b0f17;
      --panel: #111727;
      --panel-2: #0f1422;
      --text: #e6ecff;
      --muted: #9fb2ffcc;
      --accent: #7aa2ff;
      --accent-2: #8cffc4;
      --danger: #ff6b8a;
      --ok: #7cff90;
      --warning: #ffd782;
      --shadow: 0 10px 30px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.04);
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 70% -10%, #1c2744 0%, transparent 60%),
                  radial-gradient(1200px 800px at -10% 120%, #18213a 0%, transparent 60%),
                  var(--bg);
    }

    .grid {
      display: grid; gap: 20px; padding: 22px; max-width: 1200px; margin: 0 auto;
      grid-template-columns: 1.1fr 1fr;
    }
    @media (max-width: 980px) { .grid { grid-template-columns: 1fr; } }

    .card {
      background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
      border: 1px solid #ffffff10;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    header.card {
      padding: 14px 18px; display: flex; align-items: center; justify-content: space-between; gap: 12px;
      position: sticky; top: 0; z-index: 5; backdrop-filter: blur(6px);
    }
    header h1 { font-size: 20px; margin: 0; letter-spacing: .3px; }
    .pill { background: #ffffff10; border: 1px solid #ffffff18; padding: 6px 10px; border-radius: 999px; color: var(--muted); }

    .panel { padding: 18px; }

    /* FORM */
    form { display: grid; gap: 14px; }
    .row { display: grid; gap: 12px; grid-template-columns: repeat(2, 1fr); }
    @media (max-width: 640px) { .row { grid-template-columns: 1fr; } }

    label { font-weight: 600; font-size: 12px; color: var(--muted); }
    .input, select, .price-input { width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid #ffffff14; background: #0c1222; color: var(--text); outline: none; box-shadow: inset 0 0 0 1px #00000040; }
    .input:focus, select:focus, .price-input:focus { box-shadow: 0 0 0 3px #7aa2ff40; border-color: #9fb2ff55; }

    .features { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 10px; }
    .feature {
      display: flex; align-items: center; gap: 10px; padding: 12px; border: 1px solid #ffffff12; border-radius: 12px; background: #0d1427; transition: transform .2s ease, background .2s ease, border-color .2s ease;
    }
    .feature:hover { transform: translateY(-2px); border-color: #ffffff2a; background: #111a30; }
    .feature input { width: 18px; height: 18px; }

    .actions { display: flex; gap: 10px; align-items: center; justify-content: flex-end; }
    button {
      appearance: none; border: 0; background: linear-gradient(135deg, var(--accent), #96b4ff); color: #0a0f1a; font-weight: 700;
      padding: 12px 16px; border-radius: 12px; cursor: pointer; box-shadow: 0 8px 20px rgba(122,162,255,.35);
      transition: transform .15s ease, box-shadow .15s ease; position: relative; overflow: hidden;
    }
    button:hover { transform: translateY(-1px); box-shadow: 0 10px 26px rgba(122,162,255,.45); }
    button:active { transform: translateY(0); box-shadow: 0 6px 16px rgba(122,162,255,.35); }

    .ghost { background: #ffffff12; color: var(--text); box-shadow: none; border: 1px solid #ffffff24; }

    /* SUMMARY */
    .summary { position: sticky; top: 74px; display: grid; gap: 14px; }
    .tile { padding: 14px; border-radius: 14px; border: 1px solid #ffffff14; background: #0d1324; }
    .price { font-size: 28px; font-weight: 800; letter-spacing: .3px; }
    .muted { color: var(--muted); }
    .badge { display: inline-block; padding: 4px 8px; border-radius: 999px; background: #ffffff12; border: 1px solid #ffffff1d; margin-right: 6px; margin-bottom: 6px; }

    /* 3D SHOWROOM */
    .showroom.card { padding: 16px; }
    .stage { position: relative; height: 420px; border-radius: 16px; background:
              radial-gradient(600px 140px at 50% 100%, rgba(122,162,255,.35), transparent 60%),
              linear-gradient(180deg, #0c1222 0%, #0a0f1a 100%);
              border: 1px solid #ffffff10; box-shadow: inset 0 0 60px #00000066; overflow: hidden; }
    .scene { position: absolute; inset: 0; perspective: 900px; }
    .car-wrap { position: absolute; left: 50%; top: 55%; transform-style: preserve-3d; transform: translate(-50%, -50%) rotateX(10deg) rotateY(20deg); animation: float 6s ease-in-out infinite; }
    @keyframes float { 0%, 100% { transform: translate(-50%, -50%) rotateX(10deg) rotateY(20deg) translateY(0); } 50% { transform: translate(-50%, -50%) rotateX(10deg) rotateY(20deg) translateY(-8px); } }

    .car { position: relative; width: 320px; height: 120px; transform-style: preserve-3d; animation: spin 16s linear infinite; }
    .car.paused { animation-play-state: paused; }
    @keyframes spin { from { transform: rotateY(0deg); } to { transform: rotateY(360deg); } }

    /* Car body (a rounded cuboid made from 6 faces) */
    .face { position: absolute; background: var(--car-base, #5aa2ff); border: 1px solid rgba(0,0,0,.15); box-shadow: inset 0 0 40px rgba(255,255,255,.12), inset 0 0 10px rgba(0,0,0,.35); }
    .body { position: absolute; left: 0; top: 0; width: 320px; height: 120px; transform-style: preserve-3d; filter: drop-shadow(0 18px 25px rgba(0,0,0,.55)); }
    .front { width: 320px; height: 120px; transform: translateZ(60px); border-radius: 18px; }
    .back  { width: 320px; height: 120px; transform: rotateY(180deg) translateZ(60px); border-radius: 18px; }
    .left  { width: 120px; height: 120px; transform: rotateY(-90deg) translateZ(160px); border-radius: 18px; }
    .right { width: 120px; height: 120px; transform: rotateY(90deg) translateZ(160px); border-radius: 18px; }
    .top   { width: 320px; height: 120px; transform: rotateX(90deg) translateZ(60px); border-radius: 24px; background: linear-gradient(180deg, rgba(255,255,255,.2), rgba(0,0,0,.3)); }
    .bottom{ width: 320px; height: 120px; transform: rotateX(-90deg) translateZ(60px); border-radius: 18px; background: linear-gradient(180deg, rgba(0,0,0,.6), rgba(0,0,0,.8)); }

    /* Cabin as a smaller box */
    .cabin { position: absolute; left: 60px; top: -30px; width: 200px; height: 80px; transform-style: preserve-3d; }
    .cabin .face { background: var(--car-base, #5aa2ff); }
    .cabin .top { background: linear-gradient(180deg, rgba(255,255,255,.25), rgba(0,0,0,.2)); }
    .win { background: linear-gradient(180deg, rgba(200,230,255,.9), rgba(90,130,170,.7)); border: 1px solid rgba(255,255,255,.5); }
    .windshield { position: absolute; width: 200px; height: 80px; transform: translateZ(40px); border-radius: 12px; }
    .rearshield { position: absolute; width: 200px; height: 80px; transform: rotateY(180deg) translateZ(40px); border-radius: 12px; }
    .cabin .left  { width: 80px; height: 80px; transform: rotateY(-90deg) translateZ(100px); border-radius: 12px; }
    .cabin .right { width: 80px; height: 80px; transform: rotateY(90deg) translateZ(100px); border-radius: 12px; }

    /* Wheels */
    .wheel { position: absolute; width: 64px; height: 64px; border-radius: 50%; background: radial-gradient(circle at 50% 50%, #222 0%, #000 70%); box-shadow: inset 0 0 14px rgba(255,255,255,.15), 0 4px 20px rgba(0,0,0,.6); }
    .wheel::before { content: ""; position: absolute; inset: 10px; border-radius: 50%; background: radial-gradient(circle at 35% 35%, #bbb, #666); box-shadow: inset 0 0 6px rgba(0,0,0,.6); }
    .w1 { left: 40px; top: 96px; }
    .w2 { right: 40px; top: 96px; }
    .w3 { left: 40px; top: -96px; transform: translateZ(120px); }
    .w4 { right: 40px; top: -96px; transform: translateZ(120px); }

    /* Ground glow */
    .glow { position: absolute; left: 50%; bottom: 14px; transform: translateX(-50%); width: 360px; height: 26px; background: radial-gradient(ellipse at center, rgba(110,160,255,.45), transparent 60%); filter: blur(6px); }

    /* Controls overlay */
    .controls { position: absolute; right: 12px; top: 12px; display: flex; gap: 8px; z-index: 2; }
    .chip { background: #ffffff14; border: 1px solid #ffffff22; color: var(--text); padding: 8px 10px; border-radius: 999px; cursor: pointer; user-select: none; }

    /* Toast */
    .toast { position: fixed; right: 20px; bottom: 20px; background: #111a30; color: var(--text); padding: 12px 14px; border-radius: 12px; border: 1px solid #ffffff18; opacity: 0; transform: translateY(10px); transition: all .3s ease; box-shadow: var(--shadow); }
    .toast.show { opacity: 1; transform: translateY(0); }

    /* Tiny confetti */
    .confetti { position: fixed; width: 6px; height: 10px; top: -10px; left: 50%; opacity: 0.9; transform: translateX(-50%); border-radius: 1px; animation: fall 1.8s linear forwards; }
    @keyframes fall { to { transform: translateX(calc(-50% + var(--dx))) translateY(120vh) rotate(520deg); opacity: 1; } }

    /* Footer note */
    footer { text-align: center; color: #ffffff6a; padding: 16px; font-size: 12px; }
  </style>
</head>
<body>
  <header class="card">
    <h1>CarSell 3D</h1>
    <span class="pill">Single‑file • HTML+CSS+JS</span>
  </header>
  

  <main class="grid">
    <!-- LEFT: Form -->
    <section class="card panel">
      <h2 style="margin:6px 0 12px 0">Enter Car Details</h2>
      <form id="carForm">
        <div class="row">
          <div>
            <label for="make">Make</label>
            <input id="make" class="input" placeholder="e.g., Honda" required />
          </div>
          <div>
            <label for="model">Model</label>
            <input id="model" class="input" placeholder="e.g., Civic" required />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="year">Year</label>
            <input id="year" class="input" type="number" min="1980" max="2099" placeholder="2023" required />
          </div>
          <div>
            <label for="price">Base Price (₹ or $)</label>
            <input id="price" class="price-input" type="number" min="0" step="100" placeholder="20000" required />
          </div>
        </div>
        <div class="row">
          <div>
            <label for="color">Color</label>
            <select id="color">
              <option value="#5aa2ff">Sky Blue</option>
              <option value="#ff5a5a">Crimson Red</option>
              <option value="#5aff95">Mint Green</option>
              <option value="#ffd45a">Sun Yellow</option>
              <option value="#c0c8d6">Silver</option>
              <option value="#111">Midnight Black</option>
            </select>
          </div>
          <div>
            <label for="trans">Transmission</label>
            <select id="trans">
              <option>Automatic</option>
              <option>Manual</option>
            </select>
          </div>
        </div>

        <div>
          <label>Available Features (add‑ons)</label>
          <div class="features">
            <label class="feature"><input type="checkbox" class="feat" data-name="Sunroof" data-price="800"/> Sunroof (+800)</label>
            <label class="feature"><input type="checkbox" class="feat" data-name="Leather Seats" data-price="1200"/> Leather Seats (+1200)</label>
            <label class="feature"><input type="checkbox" class="feat" data-name="ADAS" data-price="2500"/> ADAS / Driver Assist (+2500)</label>
            <label class="feature"><input type="checkbox" class="feat" data-name="Premium Audio" data-price="650"/> Premium Audio (+650)</label>
            <label class="feature"><input type="checkbox" class="feat" data-name="Extended Warranty" data-price="1500"/> Extended Warranty (+1500)</label>
            <label class="feature"><input type="checkbox" class="feat" data-name="Performance Pack" data-price="3000"/> Performance Pack (+3000)</label>
          </div>
        </div>

        <div class="actions">
          <button type="button" class="ghost" id="resetBtn">Reset</button>
          <button type="submit" id="submitBtn">List Car</button>
        </div>
      </form>
    </section>

    <!-- RIGHT: Summary + 3D Showroom -->
    <aside class="summary">
      <div class="card tile">
        <div class="muted">Estimated Total</div>
        <div class="price" id="total">—</div>
        <div class="muted" id="breakdown">Base: — • Features: —</div>
      </div>
      <div class="card tile" id="badges"></div>

      <section class="showroom card">
        <div class="controls">
          <span class="chip" id="spinToggle">⏯︎ Spin</span>
          <span class="chip" id="viewReset">🔄 Reset View</span>
        </div>
        <div class="stage">
          <div class="scene" id="scene">
            <div class="car-wrap" id="carWrap">
              <div class="car" id="car">
                <div class="body">
                  <div class="face front"></div>
                  <div class="face back"></div>
                  <div class="face left"></div>
                  <div class="face right"></div>
                  <div class="face top"></div>
                  <div class="face bottom"></div>
                </div>
                <div class="cabin">
                  <div class="face windshield win"></div>
                  <div class="face rearshield win"></div>
                  <div class="face left"></div>
                  <div class="face right"></div>
                  <div class="face top"></div>
                  <div class="face bottom"></div>
                </div>
                <div class="wheel w1"></div>
                <div class="wheel w2"></div>
                <div class="wheel w3"></div>
                <div class="wheel w4"></div>
              </div>
              <div class="glow"></div>
            </div>
          </div>
        </div>
      </section>
    </aside>
  </main>

  <div class="toast" id="toast">Car listed! 🎉 Your 3D showcase is live.</div>

  <footer>Built for demo purposes • CSS 3D (no external libraries)</footer>

  <script>
    // Helpers
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    const priceEl = $('#total');
    const breakdownEl = $('#breakdown');
    const badgesEl = $('#badges');
    const colorSel = $('#color');
    const carEl = $('#car');
    const carWrap = $('#carWrap');
    const scene = $('#scene');

    function format(n) {
      if (!isFinite(n)) return '—';
      return new Intl.NumberFormat(undefined, { style: 'currency', currency: guessCurrency() }).format(n);
    }
    function guessCurrency() {
      // If user typed a big number (₹) we can't detect exactly; default to USD or INR heuristically
      const v = Number($('#price').value || 0);
      return v > 100000 ? 'INR' : 'USD';
    }

    function computeTotal() {
      const base = Number($('#price').value || 0);
      const feats = $$('.feat:checked').reduce((sum, el) => sum + Number(el.dataset.price), 0);
      priceEl.textContent = format(base + feats);
      breakdownEl.textContent = `Base: ${format(base)} • Features: ${format(feats)}`;

      // Badges
      const make = $('#make').value.trim();
      const model = $('#model').value.trim();
      const year = $('#year').value.trim();
      const trans = $('#trans').value;
      const picked = $$('.feat:checked').map(el => el.dataset.name);

      let html = '';
      if (year || make || model) html += `<span class="badge">${[year, make, model].filter(Boolean).join(' ')}</span>`;
      if (trans) html += `<span class="badge">${trans}</span>`;
      if (picked.length) html += picked.map(n => `<span class="badge">${n}</span>`).join('');
      if (!html) html = '<span class="muted">No selections yet. Choose features to see tags here.</span>';
      badgesEl.innerHTML = html;
    }

    // Update car color (CSS var)
    function updateCarColor() {
      const color = colorSel.value;
      carEl.style.setProperty('--car-base', color);
    }

    // Interactions
    $('#carForm').addEventListener('input', () => { computeTotal(); updateCarColor(); });
    colorSel.addEventListener('change', updateCarColor);

    // Reset form
    $('#resetBtn').addEventListener('click', () => {
      $('#carForm').reset();
      updateCarColor();
      computeTotal();
      toast('Form reset');
    });

    // Submit
    $('#carForm').addEventListener('submit', (e) => {
      e.preventDefault();
      computeTotal();
      toast('Car listed!');
      confetti(60);
      // Pause spin briefly to dramatize
      carEl.classList.add('paused');
      setTimeout(() => carEl.classList.remove('paused'), 1800);
      // Save draft to localStorage
      const data = {
        make: $('#make').value, model: $('#model').value, year: $('#year').value,
        price: $('#price').value, color: $('#color').value, trans: $('#trans').value,
        features: $$('.feat:checked').map(el => el.dataset.name)
      };
      localStorage.setItem('carSellDraft', JSON.stringify(data));
    });

    // Restore draft if any
    (function restore(){
      try {
        const raw = localStorage.getItem('carSellDraft');
        if (!raw) return;
        const d = JSON.parse(raw);
        if (d.make) $('#make').value = d.make;
        if (d.model) $('#model').value = d.model;
        if (d.year) $('#year').value = d.year;
        if (d.price) $('#price').value = d.price;
        if (d.color) $('#color').value = d.color;
        if (d.trans) $('#trans').value = d.trans;
        $$('.feat').forEach(f => f.checked = d.features?.includes(f.dataset.name));
      } catch {}
      updateCarColor();
      computeTotal();
    })();

    // 3D view controls (drag to orbit)
    let drag = false, sx=0, sy=0, rx=10, ry=20;
    scene.addEventListener('pointerdown', (e)=>{ drag = true; sx=e.clientX; sy=e.clientY; carEl.classList.add('paused'); });
    window.addEventListener('pointerup', ()=>{ drag=false; });
    window.addEventListener('pointermove', (e)=>{
      if (!drag) return;
      const dx = e.clientX - sx; const dy = e.clientY - sy;
      sx = e.clientX; sy = e.clientY;
      ry += dx * 0.3; rx -= dy * 0.2; rx = Math.max(-10, Math.min(40, rx));
      carWrap.style.transform = `translate(-50%, -50%) rotateX(${rx}deg) rotateY(${ry}deg)`;
    });

    $('#viewReset').addEventListener('click', ()=>{ rx=10; ry=20; carWrap.style.transform = `translate(-50%, -50%) rotateX(${rx}deg) rotateY(${ry}deg)`; });

    // Spin toggle
    let spinning = true;
    $('#spinToggle').addEventListener('click', ()=>{
      spinning = !spinning;
      carEl.classList.toggle('paused', !spinning);
    });

    // Toast + confetti
    let toastTimer;
    function toast(msg){
      const t = $('#toast');
      t.textContent = msg + ' 🎉 Your 3D showcase is live.';
      t.classList.add('show');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> t.classList.remove('show'), 2200);
    }

    function confetti(n=40){
      for (let i=0;i<n;i++) {
        const s = document.createElement('div');
        s.className = 'confetti';
        s.style.left = Math.random()*100 + 'vw';
        s.style.background = `hsl(${Math.random()*360}, 90%, 60%)`;
        s.style.setProperty('--dx', (Math.random()*200-100)+'px');
        s.style.animationDelay = (Math.random()*0.3)+'s';
        document.body.appendChild(s);
        setTimeout(()=> s.remove(), 2000);
      }
    }
  </script>
</body>
</html>
